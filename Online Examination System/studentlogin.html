<!-- Title : Online Examination System
Author : Ramapraba J
Created Date : 03-04-2024 -->
<!DOCTYPE html>
<html>
<head>
    <title>Login Form</title>
    <link rel="stylesheet" type="text/css" href="login.css">
    <!-- <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" /> -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
</head>
<body>
<div class="container">
    <div class="img">
        <img src="images/8.jpg">
    </div>
    <div class="login-content">
        <form id="loginForm">
            <img src="images/student.png" style="height:100px;width:100px">
            <h2 class="title">Login</h2>
			<div class="input-div">
                <span class="icon"><ion-icon name="person-circle"></ion-icon></span>
                <div class="div" >
                    <select id="userType" class="input" required>
                        <option value="" disabled selected >User Type</option>
                        <option value="student">Student</option>
                        <option value="admin">Admin</option>
                    </select>
                </div>
            </div>
            <div class="input-div">
                <span class="icon"><ion-icon name="person"></ion-icon></span>
                <div class="div">
                    <h5>Username</h5>
                    <input type="text" id="username" class="input" required>
                </div>
            </div>
            <div class="input-div">
                <span class="icon"><ion-icon name="lock-closed"></ion-icon></span>
                <div class="div">
                    <h5>Password</h5>
                    <input type="password" id="password" class="input" required>
                </div>
            </div>
          
            <div id="errorMessage" class="error-message"></div>
            <a href="#" class="forget-password">Forgot Password?</a>
            <input type="submit" class="btn" value="Login">
            <p>Don't have an account? <a href="register.html">Create Account</a></p>
        </form>
    </div>
</div>
<script type="text/javascript" src="login.js"></script>
<script>
   
	document.addEventListener("DOMContentLoaded", function() {
            const loginForm = document.getElementById("loginForm");
            const errorMessage = document.getElementById("errorMessage");

            loginForm.addEventListener("submit", function(event) {
                event.preventDefault();

                // Get user input
                const username = document.getElementById("username").value;
                const password = document.getElementById("password").value;
                const userType = document.getElementById("userType").value;

                // Retrieve user data from local storage
                const storedUserData = JSON.parse(localStorage.getItem('userData'));

                // Check if user data exists
                if (storedUserData) {
                    // Check if the entered credentials match the stored user data
                    if (userType === storedUserData.userType && 
                        username === storedUserData.username && 
                        password === storedUserData.password) {
                        // Redirect to appropriate page based on user type
                        if (userType === "admin") {
							alert( "login Successfully");
                            window.location.href = "admin.html";
                        } else if (userType === "student") {
                            window.location.href = "index.html";
                        }
                    } else {
                        // Display error message for invalid credentials
                        alert( "Invalid username or password");
                    }
                } else {
                    // Display error message if no user data is found
                    alert( "No user data found. Please register first.");
                }
            });
        });
    // document.addEventListener("DOMContentLoaded", function() {
    // const loginForm = document.getElementById("loginForm");

    // loginForm.addEventListener("submit", function(event) {
    //     event.preventDefault();

    //     // Get user input
    //     const username = document.getElementById("username").value;
    //     const password = document.getElementById("password").value;
    //     const userType = document.getElementById("userType").value;

    //     // Retrieve user data from local storage
    //     const storedUserData = JSON.parse(localStorage.getItem('userData')) || [];

    //     // Check if user data exists
    //     const user = storedUserData.find(user => user.username === username);

    //     if (user) {
    //         // Check if the entered credentials match the stored user data
    //         if (userType === user.userType && password === user.password) {
    //             // Redirect to appropriate page based on user type
    //             if (userType === "admin") {
    //                 alert("Login Successfully");
    //                 window.location.href = "admin.html";
    //             } else if (userType === "student") {
    //                 window.location.href = "index.html";
    //             }
    //         } else {
    //             // Display error message for invalid credentials
    //             alert("Invalid username or password");
    //         }
    //     } else {
    //         // Display error message if username is not found
    //         alert("No user found. Please register first.");
    //     }
    // });
//});


</script>
</body>
</html>
